<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="js/js.cookie.js"></script>

    <style type="text/css">
        .group1{
            visibility: hidden;
        }

    </style>

    <script type="text/javascript">

        /***********************************************
         * Random Content Order script- (c) Dynamic Drive DHTML code library (www.dynamicdrive.com)
         * Please keep this notice intact
         * Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
         ***********************************************/

        function randomizeContent(classname){
            var contents=randomizeContent.collectElementbyClass(classname);
            contents.text.sort(function() {return 0.5 - Math.random();});
            var tbodyref=contents.ref[0].tagName=="TR"? contents.ref[0].parentNode : new Object();
            for (var i=0; i<contents.ref.length; i++){
                if (tbodyref.moveRow) //if IE
                    tbodyref.moveRow(0, Math.round(Math.random()*(tbodyref.rows.length-1)));
                else
                    contents.ref[i].innerHTML=contents.text[i];
                contents.ref[i].style.visibility="visible"
            }
        }

        randomizeContent.collectElementbyClass=function(classname){ //return two arrays containing elements with specified classname, plus their innerHTML content
            var classnameRE=new RegExp("(^|\\s+)"+classname+"($|\\s+)", "i"); //regular expression to screen for classname within element
            var contentobj=new Object();
            contentobj.ref=new Array(); //array containing references to the participating contents
            contentobj.text=new Array();//array containing participating contents' contents (innerHTML property)
            var alltags=document.all? document.all : document.getElementsByTagName("*");
            for (var i=0; i<alltags.length; i++){
                if (typeof alltags[i].className=="string" && alltags[i].className.search(classnameRE)!=-1){
                    contentobj.ref[contentobj.ref.length]=alltags[i];
                    contentobj.text[contentobj.text.length]=alltags[i].innerHTML
                }
            }
            return contentobj
        }
    </script>



</head>
<body>
<div class="container">
    <div class="jumbotron">
        <h1>Visualising Security Threats</h1>
        <p>Resize this responsive page to see the effect!</p>
    </div>
    <div id="moduleWrap" class="row">
        <div class="col-sm-4">
            <h3>Exercise 1</h3>
            <div class="group1">
                <div id="1">
                <p>The following exercise will use a "typical" industry layout for displaying enterprise data.</p>
                <p>When you are ready enter the site using the button below and follow the onscreen instructions</p>
                <a href="Site1/index.html" type="button" class="btn btn-lg btn-success disabled">Enter</a>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <h3>Exercise 2</h3>
            <div class="group1">
                <div id="2">
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...lewgligliuiihbliuiubliugiupiugigig</p>
                <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
                <a href="Site2/index.html" type="button" class="btn btn-lg btn-success disabled">Enter</a>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <h3>Exercise 3</h3>
            <div class="group1">
                <div id="3" >
                <p>Lorem ipsum dolor sit amet, consectetur adipisi..the quick brown fox jumped over the lazy dog.</p>
                <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco and what ever whatever What EVA!</p>
                <a href="Site3/index.html" type="button" class="btn btn-lg btn-success disabled">Enter</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    if (Cookies.get("testCookie") == null) {
    //Do stuff if cookie doesn't exist like set a cookie with a value of 1

        //randomize order of contents with DIV class="group1"
        randomizeContent("group1");

        // create array for Order of Exercises
        var exOrder = $('.group1').map(function() {
            console.log(this.childNodes[1].id);
            return this.childNodes[1].id;
        });
        exOrder = exOrder.splice(0,3);

        console.log(exOrder);

        // set cookie with div order
        Cookies.set('testCookie', JSON.stringify(exOrder));

    }

    else {

        var reOrder = JSON.parse(Cookies.get('testCookie'));
        console.log(reOrder);
        var div1=$('#1');

        var div2=$('#2');

        var div3=$('#3');

        $('.group1').each(function(parameters)
        {
            var index = parameters.index;
            console.log("hello");
            //$(this).empty();
            switch(reOrder[index]){
                case "1": $(this).append(div1); break;
                case "2": $(this).append(div2); break;
                case "3": $(this).append(div3); break;
            }
            $(this).css({"visibility":"visible"})
        });
        }

</script>

</body>
</html>
